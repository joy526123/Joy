<!doctype html><html><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" name="viewport"><title>liff.scanCodeV2()</title><meta content="這是由官方認證的 API 專家「戴均民」所開發的 LINE LIFF v2 程式。" name="description"><meta content="2133031763635285" property="fb:app_id"><meta content="這是由官方認證的 API 專家「戴均民」所開發的 LINE LIFF v2 程式。" property="og:description"><meta content="zh_TW" property="og:locale"><meta content="筆記國度" property="og:site_name"><meta content="liff.scanCodeV2()" property="og:title"><meta content="website" property="og:type"><link href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet"><style>[v-cloak]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,body,h1,h2,h3,h4,h5,h6{font-family:"Noto Sans TC",sans-serif}</style><style>.letter-spacing-n1px,.letter-spacing-n1px .btn,.letter-spacing-n1px input,.letter-spacing-n1px select,.letter-spacing-n1px textarea{letter-spacing:-1px}</style></head><body><div class="container my-4 text-monospace" id="app" v-cloak><h3 class="my-3 text-center">liff.scanCodeV2()</h3><div class="mb-3 form-group"><label>liff.scanCode() 測試</label><div class="mb-3 d-flex mx-n1 row"><button :class="btns[tests[0]]" @click="btnScanCode" class="btn flex-fill mx-1 my-1" type="button"><i :class="icons[tests[0]]" class="fa mr-1"></i> V1</button><button :class="btns[tests[1]]" @click="btnScanCodeV2" class="btn flex-fill mx-1 my-1" type="button"><i :class="icons[tests[1]]" class="fa mr-1"></i> V2</button></div></div><div class="mb-3 form-group"><label>liff</label><div class="input-group input-group-sm letter-spacing-n1px mb-1" v-for="val, key in sdk"><div class="input-group-prepend"><div class="input-group-text">{{ key }}</div></div><input :value="val" class="form-control text-right" readonly v-if="val.length < 32"><textarea :value="val" class="form-control form-control-sm" readonly rows="6" v-else></textarea></div></div><div class="mb-3 form-group"><label>navigator.userAgent</label><textarea :value="_.get(window, 'navigator.userAgent')" class="form-control form-control-sm" readonly rows="6"></textarea></div></div><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/crypto-js@3/crypto-js.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/js-base64@3/base64.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/json5@2/dist/index.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script><script crossorigin="anonymous" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js"></script><script crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/vconsole@3/dist/vconsole.min.js"></script><script>window.vConsole=new VConsole;const catchErr=t=>{throw _.set(new Error(t.message),"originalError",t)};window.loginPromise=(async()=>{await liff.init({liffId:"1654046335-4BDKExAV"}).catch(catchErr),liff.isLoggedIn()||(liff.login({redirectUri:location.href}),await new Promise(t=>{}))})(),window.vm=new Vue({el:"#app",data:{sdk:{getContext:"",getLineVersion:"",getOS:"",getVersion:"",isInClient:""},tests:[0,0],icons:["fa-question-circle","fa-check-circle","fa-times-circle"],btns:["btn-outline-dark","btn-success","btn-danger"]},async mounted(){this.showLoading("請稍候","網頁載入中"),await window.loginPromise,_.each([["getContext"],["getLineVersion"],["getOS"],["getVersion"],["isInClient"]],t=>{this.$set(this.sdk,t[0],JSON.stringify(_.invoke(liff,...t)))}),Swal.close()},methods:{async btnScanCode(){try{if(!liff.scanCode)throw new Error("liff.scanCode 不存在");this.showLoading("請稍候","liff.scanCode()");var t=_.get(await liff.scanCode().catch(catchErr),"value");this.$set(this.tests,0,1),await Swal.fire({icon:"success",title:"掃碼成功 V1",text:t})}catch(t){console.log(t),this.$set(this.tests,0,2),await Swal.fire({icon:"error",title:"掃碼失敗 V1",text:t.message})}},async btnScanCodeV2(){try{if(!liff.scanCodeV2)throw new Error("liff.scanCodeV2 不存在");this.showLoading("請稍候","liff.scanCodeV2()");var t=_.get(await liff.scanCodeV2().catch(catchErr),"value");this.$set(this.tests,1,1),await Swal.fire({icon:"success",title:"掃碼成功 V2",text:t})}catch(t){console.log(t),this.$set(this.tests,1,2),await Swal.fire({icon:"error",title:"掃碼失敗 V2",text:t.message})}},showLoading(t,e){Swal.fire({title:t,text:e,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{Swal.showLoading()}})}}});</script></body></html>
